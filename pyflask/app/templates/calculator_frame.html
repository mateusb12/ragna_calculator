<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="#"/>
    <link href="{{ url_for('static', filename='css/frames/calculator_frame.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/bstrap/bootstrap.min.css') }}" rel="stylesheet">
    <meta charset="UTF-8">
    <title>Calculator frame</title>
    <script src="static/js/selection_rules.js"></script>
    <script>
        function forceSubmit(){
             document.getElementById("submit").click();
        }

        function forceRender(){
            var timestamp = new Date().getTime();
            var src = "static/assets/custom.png?t=" + timestamp
            return src;
        }






    </script>
</head>

<body style="background-color:#96897f;">
{% block content %}

<form action="" method="POST">
    {{form.csrf_token}}

    <div class="form-group">
        <div class="full-card">
            <h1 class="main-label">
                Ragnarok calculator
            </h1>
            <div class="main-card">

                <table class="tborder">
                    <tbody>
                    <tr></tr>

                    <tr>
                        <td class="data">
                            <table>
                                <tbody>
                                <tr class="thin">
                                    <td class="right">Placeholder</td>
                                </tr>

                                <tr class="thin">
                                    <td class="right">Placeholder</td>
                                    <td> Select Placeholder</td>
                                </tr>

                                <tr>
                                    <td class="right">Placeholder</td>
                                    <td> Select Placeholder</td>
                                </tr>
                                <tr>

                                    <td class="right">Placeholder</td>
                                    <td> Select Placeholder</td>
                                </tr>

                                <tr>
                                    <td class="right">Placeholder</td>
                                    <td> Placeholder</td>
                                </tr>

                                <tr>
                                    <td class="right">Placeholder</td>
                                    <td> Placeholder</td>
                                </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="full-card">

            <h1 class="status-label">
                <div class="status-title>">Status</div>
            </h1>

            <div class="main-card">
                <table class="main-table">
                    <tbody class="status-body">
                    <tr class="status-title">
                        <td colspan="6" class="tableframe-title">Remaining points:
                            {{player_info['complex_info'].attribute_balance}}
                        </td>
                    </tr>

                    <tr class="status-content">
                        <td class="level-content">
                            <table class="level-list">
                                <tbody>
                                <tr class="level-item">
                                    <td>Base level:</td>
                                    <td class="">
                                        {{form.base_level(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                </tr>
                                <tr class="level-item">
                                    <td>Job lvl</td>
                                    <td>
                                        {{form.job_level(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                </tr>
                                <tr class="level-item">
                                    <td>Class</td>
                                    <td>
                                        {{form.class_name(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                </tr>
                                <tr class="level-item">
                                    <td>Null</td>
                                    <td>Select null</td>
                                </tr>
                                <tr class="level-item">
                                    <td>Null</td>
                                    <td>Select null</td>
                                </tr>
                                </tbody>
                            </table>
                        </td>
                        <td class="attribute-content">
                            <table class="status-list">
                                <tbody>
                                <tr class="attribute-item">
                                    <td class="stat-text">STR</td>
                                    <td class="stat-select">
                                        {{form.player_str(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].str_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        AGI
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_agi(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].agi_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        VIT
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_vit(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].vit_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        INT
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_int(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].int_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        DEX
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_dex(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].dex_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        LUK
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_luk(class="droplist", onchange="forceSubmit()")}}
                                    <td class="stat-bonus">+{{player_info['complex_info'].luk_bonus}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </td>
                        <td class="complex-image" style="display:block; margin-top: 20px; margin-right: 10px;">
                            <img id="target_image" src=a" onerror="this.src=forceRender()" width="100%" height="100%">
                        </td>
                    </tr>
                    </tbody>
                </table>

                <table class="gear-table">
                    <tbody class="gear-body">
                    <tr class="gear-title">
                        <td colspan="6" class="gearframe-title">
                            Remaining points: This is a placeholder
                        </td>
                    </tr>
                    <tr class="gear-content">
                        <td class="gear-content">
                            <table class="level-list">
                                <tbody>
                                <tr class="gear-item">
                                    <td class = "gear-selection">
                                        {{form.headtop_item(class="gearlist", onchange="forceSubmit()")}}
                                    </td>
                                    <td style="width: 20px;">
                                        {% if is_refineable(form.headtop_item.data) %}
                                            {{form.refine_list(class="gear_refine", onchange="forceSubmit()")}}
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if has_slots(form.headtop_item.data) %}
                                            {{form.refine_list(class="gear_refine", onchange="forceSubmit()")}}
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr class="gear-item">
                                    <td>
                                        {{form.headmid_item(class="gearlist", onchange="forceSubmit()")}}
                                    </td>
                                    <td>
                                        {{is_refineable(form.headtop_item.data)}}
                                    </td>
                                </tr>
                                <tr class="gear-item">
                                    <td>
                                        {{form.headlow_item(class="gearlist", onchange="forceSubmit()")}}
                                    </td>
                                </tr>
                                <tr class="gear-item">
                                    <td>{{form.shield_item(class="gearlist", onchange="forceSubmit()")}}</td>
                                </tr>
                                <tr class="gear-item">
                                    <td>{{form.shoes_item(class="gearlist", onchange="forceSubmit()")}}</td>
                                </tr>
                                <tr class="gear-item">
                                    <td>{{form.armor_item(class="gearlist", onchange="forceSubmit()")}}</td>
                                </tr>
                                <tr class="gear-item">
                                    <td>{{form.robe_item(class="gearlist", onchange="forceSubmit()")}}</td>
                                </tr>
                                <tr class="gear-item">
                                    <td>{{form.accessory1_item(class="gearlist", onchange="forceSubmit()")}}</td>
                                </tr>
                                <tr class="gear-item">
                                    <td>{{form.accessory2_item(class="gearlist", onchange="forceSubmit()")}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </td>
                        <td class="attribute-content">
                            <table class="status-list">
                                <tbody>
                                <tr class="attribute-item">
                                    <td class="stat-text">STR</td>
                                    <td class="stat-select">
                                        {{form.player_str(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].str_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        AGI
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_agi(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].agi_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        VIT
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_vit(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].vit_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        INT
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_int(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].int_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        DEX
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_dex(class="droplist", onchange="forceSubmit()")}}
                                    </td>
                                    <td class="stat-bonus">+{{player_info['complex_info'].dex_bonus}}</td>
                                </tr>
                                <tr class="attribute-item">
                                    <td class="stat-text">
                                        LUK
                                    </td>
                                    <td class="stat-select">
                                        {{form.player_luk(class="droplist", onchange="forceSubmit()")}}
                                    <td class="stat-bonus">+{{player_info['complex_info'].luk_bonus}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <input type="submit" id="submit" value="Submit" onclick="" style="display: none;"><br>
</form>

<br><br>
<h3>{{player_info}}</h3>

{% endblock %}
</body>
</html>